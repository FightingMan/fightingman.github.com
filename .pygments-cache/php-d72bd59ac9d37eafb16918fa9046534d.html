<div class="highlight"><pre><span class="x">        ...</span>
<span class="x">		if ($this-&gt;config[&#39;base_url&#39;] == &#39;&#39;)</span>
<span class="x">		{</span>
<span class="x">			if (isset($_SERVER[&#39;HTTP_HOST&#39;]))</span>
<span class="x">			{</span>
<span class="x">				$base_url = isset($_SERVER[&#39;HTTPS&#39;]) &amp;&amp; strtolower($_SERVER[&#39;HTTPS&#39;]) !== &#39;off&#39; ? &#39;https&#39; : &#39;http&#39;;</span>
<span class="x">				$base_url .= &#39;://&#39;. $_SERVER[&#39;HTTP_HOST&#39;];</span>
<span class="x">				$base_url .= str_replace(basename($_SERVER[&#39;SCRIPT_NAME&#39;]), &#39;&#39;, $_SERVER[&#39;SCRIPT_NAME&#39;]);</span>
<span class="x">			}</span>

<span class="x">			else</span>
<span class="x">			{</span>
<span class="x">				$base_url = &#39;http://localhost/&#39;;</span>
<span class="x">			}</span>

<span class="x">			$this-&gt;set_item(&#39;base_url&#39;, $base_url);</span>
<span class="x">		}</span>
<span class="x">        ...</span>
<span class="x">    </span>
</pre>
</div>
